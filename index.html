<!DOCTYPE html>
<html>
<head>
    <title>Simple Game Programming IDE</title>
    <!-- Include any additional CSS or JS libraries here -->
</head>
<body>
    <textarea id="code-editor"></textarea>
    <button id="run-button">Run</button>
    <button id="save-button">Save</button>
    <button id="load-button">Load</button>
    <canvas id="display-area"></canvas>

    <script>
        class Sprite {
    constructor(name) {
        this.name = name;
        // Initialize position, speed, etc.
    }

    moveTowards(target) {
        // Logic to move sprite towards another sprite
    }

    move(direction) {
        // Logic to move sprite in a direction
    }

    // Other sprite methods...
}

class Environment {
    constructor() {
        this.sprites = [];
        this.nonSpriteObjects = [];
        // Initialize environment
    }

    addSprite(sprite) {
        this.sprites.push(sprite);
    }

    // Other environment methods...
}

function defineFunction(name, func) {
    window[name] = func;
}

function repeat(times, func) {
    for (let i = 0; i < times; i++) {
        func();
    }
}

function onKeyPress(key, func) {
    document.addEventListener('keydown', event => {
        if (event.key === key) {
            func();
        }
    });
}

function checkCollision(sprite1, sprite2) {
    // Simple bounding box collision detection
    return sprite1.x < sprite2.x + sprite2.width &&
           sprite1.x + sprite1.width > sprite2.x &&
           sprite1.y < sprite2.y + sprite2.height &&
           sprite1.y + sprite1.height > sprite2.y;
}

function gameLoop() {
    context.clearRect(0, 0, canvas.width, canvas.height);

    // Update game state
    updateGameState();

    // Draw sprites
    env.sprites.forEach(sprite => sprite.draw(context));

    requestAnimationFrame(gameLoop);
}

function updateGameState() {
    // Check for collisions and update sprite states
    for (let i = 0; i < env.sprites.length; i++) {
        for (let j = i + 1; j < env.sprites.length; j++) {
            onCollision(env.sprites[i], env.sprites[j], () => {
                // Handle collision (e.g., bounce off, reduce health)
            });
        }
    }

    // Other game state updates
}

draw(context) {
        // Logic to draw the sprite using the canvas context
        // Example: Draw a simple rectangle for the sprite
        context.fillStyle = this.color; // Assuming each sprite has a 'color' property
        context.fillRect(this.x, this.y, this.width, this.height);
    }


function setupCanvas() {
    const canvas = document.createElement('canvas');
    canvas.width = 800; // Set canvas width
    canvas.height = 600; // Set canvas height
    document.body.appendChild(canvas);
    return canvas.getContext('2d');
}

const context = setupCanvas();

function render() {
    context.clearRect(0, 0, canvas.width, canvas.height);

    // Draw each sprite
    env.sprites.forEach(sprite => sprite.draw(context));

    requestAnimationFrame(render);
}

render();


function onCollision(sprite1, sprite2, func) {
    // Call function if collision occurs
    if (checkCollision(sprite1, sprite2)) {
        func();
    }
}

        function setupIDE() {
            const editor = document.getElementById('code-editor');
            const runButton = document.getElementById('run-button');
            const saveButton = document.getElementById('save-button');
            const loadButton = document.getElementById('load-button');
            const canvas = document.getElementById('display-area');
            const context = canvas.getContext('2d');

            runButton.addEventListener('click', () => {
                // Parse and execute the code from the editor
            });

            saveButton.addEventListener('click', () => {
                const code = editor.value;
                saveProject('myGame', code);
            });

            loadButton.addEventListener('click', () => {
                loadProject('myGame', (code) => {
                    editor.value = code;
                });
            });
        }

        function saveProject(name, code) {
            // Use Fetch API to send code to the server for saving
            fetch('http://86.3.72.80:3306/save', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ name, code }),
            });
        }

        function loadProject(name, callback) {
            // Use Fetch API to request code from the server
            fetch(`http://86.3.72.80:3306/load?name=${name}`)
                .then(response => response.json())
                .then(data => {
                    callback(data.code);
                });
        }

        setupIDE();
    </script>
</body>
</html>
